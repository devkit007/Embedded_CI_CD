name: Build and Test nRF Connect SDK

on: [push]

jobs:
  build-firmware:
    runs-on: windows-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v3

# Installing nRF Connect SDK
# https://developer.nordicsemi.com/nRF_Connect_SDK/doc/latest/nrf/installation/installing.html

    - name: Cache the required tools
      id: cache-tools
      uses: actions/cache@v3
      with:
        path: |
          C:\ProgramData\chocolatey\lib
        key: tools-${{ runner.os }}-${{ hashFiles('**/chocolateyinstall.ps1') }}
    
    - name: Check Cache Status for tools
      if: steps.cache-tools.outputs.cache-hit != 'true'
      run: echo "Cache hit:"

      

    # - name: Install the required tools
    #   if: steps.cache-tools.outputs.cache-hit != 'true'
    #   run: |
    #     choco feature enable -n allowGlobalConfirmation
    #     choco install cmake --installargs 'ADD_CMAKE_TO_PATH=System'
    #     choco install ninja gperf python git dtc-msys2 wget 7zip
    #     choco list
    #   shell: pwsh

    # - name: Cache the required tools
    #   id: cache-tools
    #   uses: actions/cache@v3
    #   with:
    #     path: |
    #       C:\ProgramData\chocolatey\lib
    #     key: tools-${{ runner.os }}-${{ hashFiles('**/chocolateyinstall.ps1') }}

    # - name: Install west
    #   run: pip3 install west

    # - name: Create 'ncs' Folder
    #   run: | 
    #     mkdir ${{ github.workspace }}/ncs
    #     ls
    #   shell: powershell

    # - name: Get the nRF Connect SDK
    #   if: steps.cache-ncs.outputs.cache-hit != 'true'
    #   working-directory: ${{ github.workspace }}/ncs
    #   run: |
    #     west init -m https://github.com/nrfconnect/sdk-nrf --mr v2.4.0
    #     west init -m https://github.com/nrfconnect/sdk-nrf --mr main
    #     west update
    #     west zephyr-export
    #     ls

    # - name: Cache nRF Connect SDK
    #   id: cache-ncs
    #   uses: actions/cache@v3
    #   with:
    #     path: ${{ github.workspace }}/ncs
    #     key: ncs-${{ runner.os }}-${{ hashFiles('**/west.yml') }}
    #     restore-keys: |
    #       ncs-windows-

    # - name: List ncs Folder
    #   working-directory: ${{ github.workspace }}/ncs
    #   run: ls



